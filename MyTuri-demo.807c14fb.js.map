{"mappings":"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","sources":["<anon>","src/js/main.js"],"sourcesContent":["(function() {\n    // Collapsible functionality\n    $('.card-header.clickable').on('click', function() {\n        const $card = $(this).closest('.collapsible');\n        const $content = $card.find('.card-content');\n        const $icon = $(this).find('.collapse-icon');\n        if ($card.hasClass('collapsed')) {\n            // Expand\n            $card.removeClass('collapsed').addClass('expanded');\n            $content.slideDown(300);\n            $icon.attr('data-lucide', 'chevron-up');\n        } else {\n            // Collapse\n            $card.removeClass('expanded').addClass('collapsed');\n            $content.slideUp(300);\n            $icon.attr('data-lucide', 'chevron-down');\n        }\n        // Recreate icons after changing data-lucide attribute\n        setTimeout(()=>{\n            lucide.createIcons();\n        }, 100);\n    });\n    /* ------------------------------------------------ */ const lessonData = {\n        \"greeting\": [\n            {\n                \"speaker\": \"Turi\",\n                \"text\": \"Welcome back. Today\\u2019s mission: spot linear functions fast \\u2014 no tricks, just clean reasoning.\",\n                \"audio\": \"M1_Greet_1.mp3\"\n            },\n            {\n                \"speaker\": \"Turi\",\n                \"text\": \"Think of it like speed-dating with graphs \\u2014 you\\u2019ll know in seconds if it\\u2019s linear or not.\",\n                \"audio\": \"M1_Greet_2.mp3\"\n            },\n            {\n                \"speaker\": \"UnvoicedNote\",\n                \"text\": \"In live mode, Turi briefly checks goals and prior progress before starting.\"\n            },\n            {\n                \"speaker\": \"Turi\",\n                \"text\": \"You\\u2019ll see equations and graphs. Your job: decide if they\\u2019re linear and explain why.\",\n                \"audio\": \"M1_Greet_3.mp3\"\n            },\n            {\n                \"speaker\": \"UnvoicedNote\",\n                \"text\": \"In live mode, you\\u2019d answer by voice or typing; Turi asks for your reasoning before revealing anything.\",\n                \"audio\": \"M1_Greet_4.mp3\"\n            }\n        ],\n        \"concepts\": [\n            {\n                \"id\": \"A\",\n                \"image\": \"M1_CA.png\",\n                \"intro\": [\n                    {\n                        \"speaker\": \"Turi\",\n                        \"text\": \"First, the core idea: A line is linear if it has the same slope everywhere.\",\n                        \"audio\": \"M1_CA_1.mp3\"\n                    },\n                    {\n                        \"speaker\": \"Turi\",\n                        \"text\": \"In equations, that\\u2019s \\u2014 one x, power of 1, nothing fancy. That one x tells us it\\u2019s a linear line.\"\n                    },\n                    {\n                        \"speaker\": \"Turi\",\n                        \"text\": \"On a graph, that\\u2019s a straight line with no curves and no surprises.\"\n                    },\n                    {\n                        \"speaker\": \"Turi\",\n                        \"text\": \"Try one. Pick the linear equation \\u2014 I\\u2019ll ask \\u201Cwhy\\u201D after.\"\n                    },\n                    {\n                        \"speaker\": \"UnvoicedNote\",\n                        \"text\": \"In live mode, Turi will almost always ask why if the response is an answer without an educated reason. Turi will guide from the response.\"\n                    },\n                    {\n                        \"speaker\": \"Turi\",\n                        \"text\": \"Which equation is linear?\",\n                        \"audio\": \"M1_CS1_Prompt.mp3\"\n                    }\n                ],\n                \"options\": [\n                    {\n                        \"label\": \"A\",\n                        \"text\": \"\\\\( y = m x + b \\\\)\",\n                        \"isCorrect\": true,\n                        \"feedback\": [\n                            {\n                                \"text\": \"Exactly. One x, power of 1. That\\u2019s linear.\",\n                                \"audio\": \"M1_CS1_A_C1.mp3\"\n                            },\n                            {\n                                \"text\": \"Spot on. It fits \\\\( y = m x + b \\\\) perfectly.\",\n                                \"audio\": \"M1_CS1_A_C2.mp3\"\n                            }\n                        ]\n                    },\n                    {\n                        \"label\": \"B\",\n                        \"text\": \"\\\\( y = x^2 + 3x + 2 \\\\)\",\n                        \"isCorrect\": false,\n                        \"feedback\": [\n                            {\n                                \"text\": \"text...\",\n                                \"audio\": \"M1_CS1_B_W1.mp3\"\n                            },\n                            {\n                                \"text\": \"text...\",\n                                \"audio\": \"M1_CS1_B_W2.mp3\"\n                            }\n                        ],\n                        \"unvoicedNote\": {\n                            \"text\": \"In live mode, Turi will plot a quadratic function to illustrate the point.\"\n                        }\n                    },\n                    {\n                        \"label\": \"C\",\n                        \"text\": \"\\\\( y = -2x^2 + 4 \\\\)\",\n                        \"isCorrect\": false,\n                        \"feedback\": []\n                    },\n                    {\n                        \"label\": \"D\",\n                        \"text\": \"The one that looks nicest.\",\n                        \"isCorrect\": false,\n                        \"feedback\": [\n                            {\n                                \"text\": \"Cute, but squinting doesn\\u2019t straighten curves.\",\n                                \"audio\": \"M1_CS1_D_J1.mp3\"\n                            },\n                            {\n                                \"text\": \"Funny, but the graph\\u2019s still curved.\",\n                                \"audio\": \"M1_CS1_D_J2.mp3\"\n                            }\n                        ],\n                        \"unvoicedNote\": {\n                            \"text\": \"In live mode, Turi uses humor here to check engagement. If there\\u2019s no reaction or signs of distraction, Turi logs a low-level focus alert and adjusts tone/pacing for the next prompt.\"\n                        }\n                    }\n                ],\n                \"reteach\": {\n                    \"speaker\": \"Turi\",\n                    \"text\": \"Linear means the same\",\n                    \"audio\": \"M1_CS1_Reteach.mp3\"\n                },\n                \"redo\": {\n                    \"text\": \"text...\",\n                    \"audio\": \"M1_CS1_Redo.mp3\"\n                },\n                \"redoNote\": {\n                    \"text\": \"In live mode, this re-ask would be open-ended, not multiple choice, and Turi would not advance until the correct answer is given.\"\n                }\n            }\n        ]\n    };\n    function mapSpeakerToType(speaker) {\n        if (speaker === 'Turi') return 'teacher';\n        if (speaker === 'UnvoicedNote') return 'unvoiced';\n        return 'unknown';\n    }\n    // 打字效果：逐字顯示文字\n    function typeText(element, text, speed = 50) {\n        return new Promise((resolve)=>{\n            let i = 0;\n            const interval = setInterval(()=>{\n                element.textContent += text.charAt(i);\n                i++;\n                if (i >= text.length) {\n                    clearInterval(interval);\n                    resolve();\n                }\n            }, speed);\n        });\n    }\n    // 播放音訊\n    function playAudio(src) {\n        return new Promise((resolve)=>{\n            const audio = new Audio(`audio/${src}`);\n            console.log(`Playing audio:` + `audio/${src}`);\n            audio.onended = resolve;\n            audio.onerror = resolve; // 若音訊失敗也繼續流程\n            audio.play();\n        });\n    }\n    // 顯示訊息並處理打字與音訊\n    async function showMessage(msg) {\n        const type = mapSpeakerToType(msg.speaker);\n        const template = $(`.message-block.message-${type}`).first();\n        const newMessage = template.clone().css('display', 'flex');\n        const textElement = newMessage.find('p')[0];\n        newMessage.find('p').text('');\n        newMessage.find('.audio-icon').addClass('show');\n        $('.chat-messages').append(newMessage);\n        // 自動捲到底\n        const chatContainer = $('.chat-messages')[0];\n        chatContainer.scrollTop = chatContainer.scrollHeight;\n        // 建立打字與音訊的 Promise\n        const typingPromise = typeText(textElement, msg.text);\n        const audioPromise = msg.audio && type === 'teacher' ? playAudio(msg.audio) : Promise.resolve();\n        // 等待兩者都完成\n        await Promise.all([\n            typingPromise,\n            audioPromise\n        ]);\n        newMessage.find('.audio-icon').addClass('pause'); // 暫停動畫\n        setTimeout(()=>{}, 1000); // 暫停動畫1秒\n        // 顯示下一則前稍作停頓\n        await new Promise((resolve)=>setTimeout(resolve, 500));\n        newMessage.find('.audio-icon').removeClass('show pause'); // 移除動畫顯示\n    }\n    // 依序顯示所有訊息\n    async function runLesson(messages) {\n        for (const msg of messages)await showMessage(msg);\n    }\n    // 啟動流程\n    $('#startLessonBtn').on('click', function() {\n        $('#startPopup').hide();\n        runLesson(lessonData.greeting); // 啟動課程流程\n    });\n    /* ------------------------------------------------ */ // Action button interactions\n    $('.action-btn, .menu-btn').on('click', function() {\n        const buttonText = $(this).text().trim();\n        // Add visual feedback\n        $(this).addClass('active');\n        setTimeout(()=>{\n            $(this).removeClass('active');\n        }, 200);\n    });\n    // Handle window resize to maintain layout\n    $(window).on('resize', function() {\n        // Ensure proper height calculations on resize\n        const windowHeight = $(window).height();\n        const headerHeight = $('.header').outerHeight();\n        const remainingHeight = windowHeight - headerHeight;\n        $('.main-content').css('height', remainingHeight + 'px');\n    });\n    // Initial height calculation\n    $(window).trigger('resize');\n})();\n\n//# sourceMappingURL=MyTuri-demo.807c14fb.js.map\n","(function () {\n\n// Collapsible functionality\n$('.card-header.clickable').on('click', function () {\n  const $card = $(this).closest('.collapsible');\n  const $content = $card.find('.card-content');\n  const $icon = $(this).find('.collapse-icon');\n\n  if ($card.hasClass('collapsed')) {\n    // Expand\n    $card.removeClass('collapsed').addClass('expanded');\n    $content.slideDown(300);\n    $icon.attr('data-lucide', 'chevron-up');\n  } else {\n    // Collapse\n    $card.removeClass('expanded').addClass('collapsed');\n    $content.slideUp(300);\n    $icon.attr('data-lucide', 'chevron-down');\n  }\n\n  // Recreate icons after changing data-lucide attribute\n  setTimeout(() => {\n    lucide.createIcons();\n  }, 100);\n});\n\n/* ------------------------------------------------ */\n\n  const lessonData = \n  {\n  \"greeting\": [\n    {\n      \"speaker\": \"Turi\",\n      \"text\": \"Welcome back. Today’s mission: spot linear functions fast — no tricks, just clean reasoning.\",\n      \"audio\": \"M1_Greet_1.mp3\"\n    },\n    {\n      \"speaker\": \"Turi\",\n      \"text\": \"Think of it like speed-dating with graphs — you’ll know in seconds if it’s linear or not.\",\n      \"audio\": \"M1_Greet_2.mp3\"\n    },\n    {\n      \"speaker\": \"UnvoicedNote\",\n      \"text\": \"In live mode, Turi briefly checks goals and prior progress before starting.\"\n    },\n    {\n      \"speaker\": \"Turi\",\n      \"text\": \"You’ll see equations and graphs. Your job: decide if they’re linear and explain why.\",\n      \"audio\": \"M1_Greet_3.mp3\"\n    },\n    {\n      \"speaker\": \"UnvoicedNote\",\n      \"text\": \"In live mode, you’d answer by voice or typing; Turi asks for your reasoning before revealing anything.\",\n      \"audio\": \"M1_Greet_4.mp3\"\n    }\n  ],\n  \"concepts\": [\n    {\n      \"id\": \"A\",\n      \"image\": \"M1_CA.png\",\n      \"intro\": [\n        {\n          \"speaker\": \"Turi\",\n          \"text\": \"First, the core idea: A line is linear if it has the same slope everywhere.\",\n          \"audio\": \"M1_CA_1.mp3\"\n        },\n        {\n          \"speaker\": \"Turi\",\n          \"text\": \"In equations, that’s — one x, power of 1, nothing fancy. That one x tells us it’s a linear line.\"\n        },\n        {\n          \"speaker\": \"Turi\",\n          \"text\": \"On a graph, that’s a straight line with no curves and no surprises.\"\n        },\n        {\n          \"speaker\": \"Turi\",\n          \"text\": \"Try one. Pick the linear equation — I’ll ask “why” after.\"\n        },\n        {\n          \"speaker\": \"UnvoicedNote\",\n          \"text\": \"In live mode, Turi will almost always ask why if the response is an answer without an educated reason. Turi will guide from the response.\"\n        },\n        {\n          \"speaker\": \"Turi\",\n          \"text\": \"Which equation is linear?\",\n          \"audio\": \"M1_CS1_Prompt.mp3\"\n        }\n      ],\n      \"options\": [\n        {\n          \"label\": \"A\",\n          \"text\": \"\\\\( y = m x + b \\\\)\",\n          \"isCorrect\": true,\n          \"feedback\": [\n            {\n              \"text\": \"Exactly. One x, power of 1. That’s linear.\",\n              \"audio\": \"M1_CS1_A_C1.mp3\"\n            },\n            {\n              \"text\": \"Spot on. It fits \\\\( y = m x + b \\\\) perfectly.\",\n              \"audio\": \"M1_CS1_A_C2.mp3\"\n            }\n          ]\n        },\n        {\n          \"label\": \"B\",\n          \"text\": \"\\\\( y = x^2 + 3x + 2 \\\\)\",\n          \"isCorrect\": false,\n          \"feedback\": [\n            {\n              \"text\": \"text...\",\n              \"audio\": \"M1_CS1_B_W1.mp3\"\n            },\n            {\n              \"text\": \"text...\",\n              \"audio\": \"M1_CS1_B_W2.mp3\"\n            }\n          ],\n          \"unvoicedNote\": {\n            \"text\": \"In live mode, Turi will plot a quadratic function to illustrate the point.\"\n          }\n        },\n        {\n          \"label\": \"C\",\n          \"text\": \"\\\\( y = -2x^2 + 4 \\\\)\",\n          \"isCorrect\": false,\n          \"feedback\": []\n        },\n        {\n          \"label\": \"D\",\n          \"text\": \"The one that looks nicest.\",\n          \"isCorrect\": false,\n          \"feedback\": [\n            {\n              \"text\": \"Cute, but squinting doesn’t straighten curves.\",\n              \"audio\": \"M1_CS1_D_J1.mp3\"\n            },\n            {\n              \"text\": \"Funny, but the graph’s still curved.\",\n              \"audio\": \"M1_CS1_D_J2.mp3\"\n            }\n          ],\n          \"unvoicedNote\": {\n            \"text\": \"In live mode, Turi uses humor here to check engagement. If there’s no reaction or signs of distraction, Turi logs a low-level focus alert and adjusts tone/pacing for the next prompt.\"\n          }\n        }\n      ],\n      \"reteach\": {\n        \"speaker\": \"Turi\",\n        \"text\": \"Linear means the same\",\n        \"audio\": \"M1_CS1_Reteach.mp3\"\n      },\n      \"redo\": {\n        \"text\": \"text...\",\n        \"audio\": \"M1_CS1_Redo.mp3\"\n      },\n      \"redoNote\": {\n        \"text\": \"In live mode, this re-ask would be open-ended, not multiple choice, and Turi would not advance until the correct answer is given.\"\n      }\n    }\n  ]\n}\n\nfunction mapSpeakerToType(speaker) {\n  if (speaker === 'Turi') return 'teacher';\n  if (speaker === 'UnvoicedNote') return 'unvoiced';\n  return 'unknown';\n}\n\n// 打字效果：逐字顯示文字\nfunction typeText(element, text, speed = 50) {\n  return new Promise(resolve => {\n    let i = 0;\n    const interval = setInterval(() => {\n      element.textContent += text.charAt(i);\n      i++;\n      if (i >= text.length) {\n        clearInterval(interval);\n        resolve();\n      }\n    }, speed);\n  });\n}\n\n// 播放音訊\nfunction playAudio(src) {\n  return new Promise(resolve => {\n    const audio = new Audio(`audio/${src}`);\n    console.log(`Playing audio:` + `audio/${src}`);\n    audio.onended = resolve;\n    audio.onerror = resolve; // 若音訊失敗也繼續流程\n    audio.play();\n  });\n}\n\n// 顯示訊息並處理打字與音訊\nasync function showMessage(msg) {\n  const type = mapSpeakerToType(msg.speaker);\n  const template = $(`.message-block.message-${type}`).first();\n  const newMessage = template.clone().css('display', 'flex');\n  const textElement = newMessage.find('p')[0];\n  newMessage.find('p').text('');\n  newMessage.find('.audio-icon').addClass('show');\n  $('.chat-messages').append(newMessage);\n\n  // 自動捲到底\n  const chatContainer = $('.chat-messages')[0];\n  chatContainer.scrollTop = chatContainer.scrollHeight;\n\n  // 建立打字與音訊的 Promise\n  const typingPromise = typeText(textElement, msg.text);\n  const audioPromise = (msg.audio && type === 'teacher') ? playAudio(msg.audio) : Promise.resolve();\n\n  // 等待兩者都完成\n  await Promise.all([typingPromise, audioPromise]);\n  newMessage.find('.audio-icon').addClass('pause'); // 暫停動畫\n  setTimeout(() => {\n    \n  }, 1000); // 暫停動畫1秒\n\n  // 顯示下一則前稍作停頓\n  await new Promise(resolve => setTimeout(resolve, 500));\n  newMessage.find('.audio-icon').removeClass('show pause'); // 移除動畫顯示\n}\n\n// 依序顯示所有訊息\nasync function runLesson(messages) {\n  for (const msg of messages) {\n    await showMessage(msg);\n  }\n}\n\n// 啟動流程\n$('#startLessonBtn').on('click', function () {\n  $('#startPopup').hide();\n  runLesson(lessonData.greeting); // 啟動課程流程\n});\n  \n/* ------------------------------------------------ */\n\n// Action button interactions\n$('.action-btn, .menu-btn').on('click', function () {\n  const buttonText = $(this).text().trim();\n  // Add visual feedback\n  $(this).addClass('active');\n  setTimeout(() => {\n    $(this).removeClass('active');\n  }, 200);\n});\n\n// Handle window resize to maintain layout\n$(window).on('resize', function () {\n  // Ensure proper height calculations on resize\n  const windowHeight = $(window).height();\n  const headerHeight = $('.header').outerHeight();\n  const remainingHeight = windowHeight - headerHeight;\n  $('.main-content').css('height', remainingHeight + 'px');\n});\n\n// Initial height calculation\n$(window).trigger('resize');\n})();"],"names":["$","on","$card","closest","$content","find","$icon","hasClass","removeClass","addClass","slideDown","attr","slideUp","setTimeout","lucide","createIcons","showMessage","msg","speaker","src","type","newMessage","template","first","clone","css","textElement","text","append","chatContainer","scrollTop","scrollHeight","typingPromise","typeText","element","speed","Promise","resolve","i","interval","setInterval","textContent","charAt","length","clearInterval","audioPromise","audio","Audio","console","log","onended","onerror","play","all","runLesson","messages","hide","trim","window","windowHeight","height","headerHeight","outerHeight","remainingHeight","trigger"],"version":3,"file":"MyTuri-demo.807c14fb.js.map"}