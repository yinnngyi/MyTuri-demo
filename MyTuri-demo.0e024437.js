!function(){$(".card-header.clickable").on("click",function(){let e=$(this).closest(".collapsible"),t=e.find(".card-content"),o=$(this).find(".collapse-icon");e.hasClass("collapsed")?(e.removeClass("collapsed").addClass("expanded"),t.slideDown(300),o.attr("data-lucide","chevron-up")):(e.removeClass("expanded").addClass("collapsed"),t.slideUp(300),o.attr("data-lucide","chevron-down")),setTimeout(()=>{lucide.createIcons()},100)});let e={greeting:[{speaker:"Turi",text:"Welcome back. Today’s mission: spot linear functions fast — no tricks, just clean reasoning. [TEST: The current sound is the test file...]",audio:"M1_Greet_1.mp3"},{speaker:"Turi",text:"Think of it like speed-dating with graphs — you’ll know in seconds if it’s linear or not.",audio:"M1_Greet_2.mp3"},{speaker:"UnvoicedNote",text:"In live mode, Turi briefly checks goals and prior progress before starting."},{speaker:"Turi",text:"You’ll see equations and graphs. Your job: decide if they’re linear and explain why.",audio:"M1_Greet_3.mp3"},{speaker:"UnvoicedNote",text:"In live mode, you’d answer by voice or typing; Turi asks for your reasoning before revealing anything.",audio:"M1_Greet_4.mp3"}],concepts:[{id:"A",image:"M1_CA.png",intro:[{speaker:"Turi",text:"First, the core idea: A line is linear if it has the same slope everywhere. [TEST: Skip the next three messages for TEST...]",audio:"M1_CA_1.mp3"},{speaker:"UnvoicedNote",text:"In live mode, Turi will almost always ask why if the response is an answer without an educated reason. Turi will guide from the response."},{speaker:"Turi",text:"Which equation is linear?",audio:"M1_CS1_Prompt.mp3"}],options:[{label:"A",text:"\\( y = m x + b \\)",isCorrect:!0,feedback:{turi:[{speaker:"Turi",text:"Exactly. One x, power of 1. That’s linear.",audio:"M1_CS1_A_C1.mp3"},{speaker:"Turi",text:"Spot on. It fits ",audio:"M1_CS1_A_C2.mp3"}]}},{label:"B",text:"\\( y = x^2 + 3x + 2 \\)",isCorrect:!1,feedback:{turi:[{speaker:"Turi",text:"Not linear.",audio:"M1_CS1_B_W1.mp3"},{speaker:"Turi",text:"Nope, quadratic means slope keeps changing.",audio:"M1_CS1_B_W2.mp3"}],note:[{speaker:"UnvoicedNote",text:"In live mode, Turi will plot a quadratic function to illustrate the point."}]}},{label:"C",text:"\\( y = -2x^2 + 4 \\)",isCorrect:!1,feedback:[{speaker:"Turi",text:"Not quite. This has x squared, that’s quadratic.",audio:"M1_CS1_B_C1.mp3"},{speaker:"Turi",text:"Look again. The squared x means it’s not linear.",audio:"M1_CS1_B_C2.mp3"},{speaker:"UnvoicedNote",text:"二次方的 x，代表這是二次方程式，不是線性。"}]},{label:"D",text:"The one that looks nicest.",isCorrect:!1,feedback:[{speaker:"Turi",text:"Not quite. This has x squared, that’s quadratic.",audio:"M1_CS1_B_C1.mp3"},{speaker:"Turi",text:"Look again. The squared x means it’s not linear.",audio:"M1_CS1_B_C2.mp3"},{speaker:"UnvoicedNote",text:"二次方的 x，代表這是二次方程式，不是線性。"}]}],reteach:{speaker:"Turi",text:"Linear means the same slope everywhere.",audio:"M1_CS1_Reteach.mp3"},reteach:[{speaker:"Turi",text:"Linear means the same slope everywhere.",audio:"M1_CS1_Reteach.mp3"}],redo:[{speaker:"Turi",text:"Let’s try that again — which equation is linear?",audio:"M1_CS1_Redo.mp3"},{speaker:"UnvoicedNote",text:"In live mode, this re-ask would be open-ended, not multiple choice, and Turi would not advance until the correct answer is given."}]}]},t=$(".chat-messages");function o(e){return new Promise(t=>{let o=new Audio(`audio/${e}`);console.log(`Playing audio: audio/${e}`),o.onended=t,o.onerror=t,o.play()})}async function a(e){var a;let i;console.log(e);let s="Turi"===(a=e.speaker)?"teacher":"UnvoicedNote"===a?"unvoiced":"unknown",n=$(`.message-block.message-${s}`).first().clone().hide(),r=n.find("p");r.text(""),$(".chat-messages").append(n),t.scrollTop(t[0].scrollHeight);let l=Promise.resolve();"unvoiced"===s?(r.text(e.text),i=new Promise(e=>{n.fadeIn(300,e)})):(n.show(),n.find(".audio-icon").addClass("show"),i=function(e,t,o=50){return new Promise(a=>{let i=0,s=setInterval(()=>{e.text(e.text()+t.charAt(i)),++i>=t.length&&(clearInterval(s),a())},o)})}(r,e.text),e.audio&&"teacher"===s&&(l=o(e.audio))),await Promise.all([i,l]),t.scrollTop(t[0].scrollHeight),"unvoiced"===s?await new Promise(e=>setTimeout(e,500)):(n.find(".audio-icon").addClass("pause"),await new Promise(e=>setTimeout(e,500)),n.find(".audio-icon").removeClass("show pause")),t.scrollTop(t[0].scrollHeight),await new Promise(e=>setTimeout(e,1e3))}async function i(e){for(let t of(console.log("\uD83D\uDC49 runLessonMessages 收到的 messages:",e),e))await a(t)}async function s(a){await i(a.greeting);for(let s=0;s<a.concepts.length;s++){let n=a.concepts[s];if(n.image){let e=$("<img>",{class:"concept-image",src:`images/${n.image}`,alt:"concept image"});$(".notes-section .card-content").append(e).show(500)}await i(n.intro);for(let e=0;e<n.options.length;e++){let o=n.options[e],a=$("<button>",{class:"action-btn choice-btn",html:`${o.label}: ${o.text}`}).attr("data-concepts",s).attr("data-options",e);o.isCorrect&&a.data("correct",!0),$("#choicePopup").append(a).addClass("show"),t.scrollTop(t[0].scrollHeight)}$(".choice-btn").on("click",async function(){let a=$(this).data("concepts"),s=$(this).data("options"),r=e.concepts[a].options[s];$("#choicePopup").removeClass("show"),t.scrollTop(t[0].scrollHeight),await o("SFX_Select_01.mp3");let l=$(".message-block.message-student").first().clone();l.find("p").text(`${r.label}: ${r.text}`),$(".chat-messages").append(l),t.scrollTop(t[0].scrollHeight);let c=r.feedback.turi,d=r.feedback.note;console.log(r);let u=[];if(Array.isArray(c)&&c.length>0){let e=c[Math.floor(Math.random()*c.length)];u.push(e),console.log(e)}Array.isArray(d)&&d.length>0&&(u=u.concat(d)),console.log(u),await i(u),r.isCorrect||(await i(n.reteach),await i(n.redo),$("#choicePopup").addClass("show"),t.scrollTop(t[0].scrollHeight))})}}$("#startLessonBtn").on("click",function(){$("#startPopup").hide(),setTimeout(()=>{s(e)},500)}),$(".action-btn, .menu-btn").on("click",function(){$(this).text().trim(),$(this).addClass("active"),setTimeout(()=>{$(this).removeClass("active")},200)}),$(window).on("resize",function(){let e=$(window).height(),t=$(".header").outerHeight();$(".main-content").css("height",e-t+"px")}),$(window).trigger("resize")}();
//# sourceMappingURL=MyTuri-demo.0e024437.js.map
